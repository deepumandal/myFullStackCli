#!/bin/bash

echo ""
echo ""
echo "ğŸ“ Validating commit message..."

pnpm exec commitlint --edit "$1"

if [ $? -ne 0 ]; then
  echo ""
  echo "ğŸš« Invalid commit message!"
  echo "ğŸ’¡ Use the Conventional Commit format:"
  echo ""
  echo "  âœ¨ feat:        A new feature"
  echo "  ğŸ› fix:         A bug fix"
  echo "  ğŸ“ docs:        Documentation only changes"
  echo "  ğŸ’„ style:       Code style (formatting only)"
  echo "  ğŸ”§ chore:       Build tasks, tooling setup"
  echo "  ğŸ” refactor:    Code change not fixing a bug or adding feature"
  echo ""
  echo "ğŸ” Examples:"
  echo "  feat: add Docker setup for Next.js"
  echo "  fix(auth): resolve login redirect loop"
  echo "  chore: setup commitlint and husky"
  echo ""
  echo "ğŸ“˜ More info: https://www.conventionalcommits.org/en/v1.0.0/"
  exit 1
else
  echo "âœ… Commit message looks great!"
fi
